{{/* 
  Mobile-First Navigation with CSS-Only Hamburger Menu
  - Uses Hugo's built-in menu system
  - CSS-only hamburger menu for mobile
  - Responsive collapse behavior
  - Mobile-friendly touch targets
*/}}


<nav class="site-navigation" role="navigation" aria-label="Main navigation">
  {{/* Mobile Menu Toggle */}}
  <input type="checkbox" id="mobile-menu-toggle" class="mobile-menu-checkbox" aria-label="Toggle mobile menu">
  
  {{/* Site Header with Brand and Mobile Toggle */}}
  <div class="nav-header">
    <a href="{{ .Site.BaseURL }}" class="site-brand" aria-label="Code Monkey Cybersecurity homepage">
      <img src="/favicon.png" alt="Code Monkey Cybersecurity logo" class="brand-logo">
      <span class="brand-text">{{ .Site.Title }}</span>
    </a>
    
    {{/* Mobile Controls */}}
    <div class="mobile-controls">
      {{/* Mobile Search Toggle */}}
      <input type="checkbox" id="mobile-search-toggle" class="mobile-search-checkbox" aria-label="Toggle search">
      <label for="mobile-search-toggle" class="mobile-search-btn" aria-label="Toggle search">
        <span class="search-icon">üîç</span>
      </label>
      
      {{/* Mobile Hamburger Button */}}
      <label for="mobile-menu-toggle" class="mobile-menu-toggle" aria-label="Toggle navigation menu">
        <span class="hamburger"></span>
        <span class="hamburger"></span>
        <span class="hamburger"></span>
      </label>
    </div>
  </div>

  {{/* Main Navigation Menu */}}
  <div class="nav-menu" role="menubar">
    {{/* CTA Section - Moved to top */}}
    <div class="nav-cta-section">
      <a href="/offerings/delphi/sign-up/" class="nav-cta" role="menuitem" aria-label="Get started with our cybersecurity services">
        <span class="cta-text">Get Started</span>
        <span class="cta-icon">‚Üí</span>
      </a>
    </div>
    
    {{/* Search Section - Desktop */}}
    <div class="nav-search-section">
      <form action="/search/" method="GET" class="nav-search-form">
        <div class="nav-search-input-container">
          <span class="nav-search-icon">üîç</span>
          <input 
            type="search" 
            name="q" 
            class="nav-search-input"
            placeholder="Search..."
            autocomplete="off"
            aria-label="Search"
          >
          <button type="submit" class="nav-search-submit" aria-label="Search">
            <span class="submit-arrow">‚Üí</span>
          </button>
        </div>
      </form>
    </div>
    
    <div class="nav-primary">
      {{ range .Site.Menus.main }}
        {{ if .HasChildren }}
          <div class="nav-group" role="none">
            <span class="nav-group-title" role="menuitem">{{ .Name }}</span>
            <ul class="nav-submenu" role="menu" aria-label="{{ .Name }} submenu">
              {{ range .Children }}
              <li role="none"><a href="{{ .URL }}" class="nav-link{{ if $.IsMenuCurrent "main" . }} active{{ end }}" role="menuitem"{{ if $.IsMenuCurrent "main" . }} aria-current="page"{{ end }}>{{ .Name }}</a></li>
              {{ end }}
            </ul>
          </div>
        {{ else }}
          <a href="{{ .URL }}" class="nav-link{{ if $.IsMenuCurrent "main" . }} active{{ end }}" role="menuitem"{{ if $.IsMenuCurrent "main" . }} aria-current="page"{{ end }}>{{ .Name }}</a>
        {{ end }}
      {{ end }}
    </div>
  </div>
  
  {{/* CSS-only Search Overlay - inside nav for CSS selectors to work */}}
  <div class="search-overlay">
  <label for="mobile-search-toggle" class="search-overlay-backdrop" aria-label="Close search"></label>
  <div class="search-spotlight">
    <div class="search-spotlight-header">
      <h2 class="visually-hidden">Search</h2>
      <label for="mobile-search-toggle" class="search-close-btn" aria-label="Close search">
        <span class="close-icon">√ó</span>
      </label>
    </div>
    
    <form action="/search/" method="GET" class="search-spotlight-form">
      <div class="search-spotlight-input-container">
        <span class="search-spotlight-icon">üîç</span>
        <input 
          type="search" 
          name="q"
          class="search-spotlight-input" 
          placeholder="Search documentation, guides, and resources..."
          autocomplete="off"
          aria-label="Search query"
          required
        >
        <button type="submit" class="search-submit-btn" aria-label="Search">
          <span class="submit-icon">‚Üµ</span>
        </button>
      </div>
    </form>
    
    <div class="search-spotlight-shortcuts">
      <span class="shortcut-hint">
        <kbd>Enter</kbd> to search ‚Ä¢ Click outside to close
      </span>
    </div>
  </div>
  </div>
</nav>

{{/* Minimal JavaScript for sticky navigation enhancement */}}
<script>
(function() {
  const nav = document.querySelector('.site-navigation');
  if (!nav) return;
  
  let ticking = false;
  
  function updateNavigation() {
    const scrolled = window.scrollY > 10;
    nav.classList.toggle('scrolled', scrolled);
    ticking = false;
  }
  
  function requestTick() {
    if (!ticking) {
      requestAnimationFrame(updateNavigation);
      ticking = true;
    }
  }
  
  window.addEventListener('scroll', requestTick, { passive: true });
})();
</script>